# tasks/main.yml
---

- name: Run preflight checks
  ansible.builtin.include_tasks: preflight.yml

- name: Configure host
  ansible.builtin.include_tasks: configure.yml

- name: Initialize cluster on control-plane nodes
  ansible.builtin.include_tasks: control-plane.yml
  when: k8s_cluster_node_type == 'master'

- name: Join workers
  ansible.builtin.include_tasks: join-workers.yml
  when: k8s_cluster_node_type == 'worker'
